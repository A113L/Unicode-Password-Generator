<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UNICODE Password Utility</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom Font Setup */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap');
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Custom styles for the password display and copy button */
        .password-container:hover .copy-icon {
            opacity: 1;
            transform: translateY(0);
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-100 min-h-screen flex items-center justify-center p-4">
    <div class="w-full max-w-4xl bg-gray-800 rounded-2xl shadow-2xl p-6 md:p-10 border border-indigo-700/50">
        <!-- Header -->
        <header class="text-center mb-10">
            <h1 class="text-4xl md:text-5xl font-extrabold text-indigo-400 mb-2 tracking-tight">
                UNICODE Password Utility
            </h1>
            <p class="text-xl text-gray-400">
                Cryptographically secure generation using a massive character pool.
            </p>
        </header>

        <!-- Generation Parameters -->
        <section class="mb-8 p-6 bg-gray-700 rounded-xl shadow-lg">
            <h2 class="text-2xl font-bold text-gray-100 mb-4 border-b border-indigo-600 pb-2">Generation Settings</h2>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Password Length -->
                <div>
                    <label for="length" class="block text-sm font-medium text-gray-300 mb-2">Password Length</label>
                    <input type="number" id="length" value="20" min="8" max="128"
                           class="w-full p-3 rounded-lg bg-gray-600 border border-gray-500 text-gray-100 focus:ring-indigo-500 focus:border-indigo-500 appearance-none transition duration-150">
                    <p class="mt-1 text-sm text-gray-400">Recommended: 16 to 32 characters.</p>
                </div>

                <!-- Number of Passwords (Max updated to 10000) -->
                <div>
                    <label for="count" class="block text-sm font-medium text-gray-300 mb-2">Number of Passwords</label>
                    <input type="number" id="count" value="3" min="1" max="10000"
                           class="w-full p-3 rounded-lg bg-gray-600 border border-gray-500 text-gray-100 focus:ring-indigo-500 focus:border-indigo-500 appearance-none transition duration-150">
                    <p class="mt-1 text-sm text-gray-400">Generate up to 10,000 passwords at once.</p>
                </div>
            </div>

            <!-- Generate Button -->
            <button id="generate-button"
                    class="mt-8 w-full py-4 text-xl font-bold rounded-lg bg-indigo-600 hover:bg-indigo-700 text-white transition duration-300 transform hover:scale-[1.01] shadow-xl shadow-indigo-500/30">
                Generate Passwords
            </button>
        </section>

        <!-- Entropy and Strength Display -->
        <section class="mb-8 p-6 bg-gray-700 rounded-xl shadow-lg grid grid-cols-1 md:grid-cols-2 gap-4">

            <!-- Pool Size -->
            <div class="bg-gray-600 p-4 rounded-lg">
                <p class="text-sm font-medium text-gray-300">Character Pool Size</p>
                <p id="pool-size" class="text-2xl font-extrabold text-white mt-1">...</p>
            </div>

            <!-- Entropy (UPDATED LABEL) -->
            <div class="bg-gray-600 p-4 rounded-lg">
                <p class="text-sm font-medium text-gray-300">Logarithmic Entropy (Bits)</p>
                <p id="entropy-bits" class="text-2xl font-extrabold text-white mt-1">0.00 bits</p>
            </div>

            <!-- Strength Rating -->
            <div class="md:col-span-2 bg-gray-600 p-4 rounded-lg">
                <p class="text-sm font-medium text-gray-300">Estimated Strength Rating</p>
                <p id="strength-rating" class="text-2xl font-extrabold text-red-500 mt-1">N/A</p>
            </div>
        </section>

        <!-- Password Output -->
        <section class="mb-8 p-6 bg-gray-800 rounded-xl">
            <h2 class="text-2xl font-bold text-gray-100 mb-4 border-b border-indigo-600 pb-2">Generated Passwords</h2>
            <div id="password-output" class="space-y-3">
                <p class="text-gray-400 text-center py-4">Click "Generate Passwords" to begin.</p>
            </div>

            <!-- Secure Storage Warning -->
            <div class="mt-8 p-4 bg-red-900/40 border border-red-700 rounded-lg shadow-inner">
                <p class="text-lg font-bold text-red-300 flex items-center mb-1">
                    <svg class="w-6 h-6 mr-2" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M18 8a6 6 0 01-7.743 5.743L10 14l-.257-.257A6 6 0 1118 8zm-7.414 2.586a1 1 0 00-1.414 1.414l.707.707-.707.707a1 1 0 001.414 1.414l.707-.707 1.414 1.414a1 1 0 001.414-1.414l-.707-.707.707-.707a1 1 0 00-1.414-1.414l-.707.707-.707-.707z" clip-rule="evenodd"></path></svg>
                    CRITICAL: Secure Storage Required
                </p>
                <p class="text-sm text-red-200">
                    These passwords are for high-security use. Do not store them unencrypted. We strongly recommend using a reputable, open-source password manager like <a href="https://keepass.info/" target="_blank" class="text-red-100 underline hover:text-red-500 font-semibold">KeePass</a> or <a href="https://bitwarden.com/" target="_blank" class="text-red-100 underline hover:text-red-500 font-semibold">Bitwarden</a>.
                </p>
            </div>

            <!-- Download Section -->
            <div id="download-section" class="mt-6 pt-4 border-t border-gray-700">
                <button id="download-button" class="w-full py-3 text-lg font-semibold rounded-lg bg-teal-600 hover:bg-teal-700 text-white transition duration-300 shadow-lg flex items-center justify-center">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>
                    Download Passwords List (.txt)
                </button>
            </div>
        </section>

        <!-- Security Guide Section (EMBEDDED CONTENT) -->
        <section class="mt-4 p-6 bg-gray-700 rounded-2xl shadow-2xl">
            <h2 class="text-3xl font-bold text-red-300 mb-4 flex items-center">
                <svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg>
                🔒 OpenSSL File Encryption Guide (Linux/macOS)
            </h2>
            <p class="text-gray-300 mb-6 border-b border-indigo-600 pb-4">
                This guide shows you how to encrypt the downloaded password list file (`unicode_passwords_X.txt`) using the powerful <strong>AES-256-CBC</strong> cipher via the OpenSSL command-line tool.
            </p>

            <!-- Prerequisites -->
            <h3 class="text-xl font-semibold text-gray-100 mb-2">Prerequisites</h3>
            <p class="text-gray-400 mb-6">
                You must have <strong>OpenSSL</strong> installed on your system, which is standard on most Linux distributions and macOS.
            </p>

            <!-- Step 1 -->
            <h3 class="text-xl font-semibold text-gray-100 mb-3 border-t pt-4 border-gray-600">Step 1: Encrypt the File</h3>
            <p class="text-gray-400 mb-3">
                Navigate to the directory where you downloaded your password file (e.g., <code class="bg-gray-800 p-1 rounded">~/Downloads</code>).
            </p>

            <!-- Table 1 -->
            <div class="overflow-x-auto mb-4">
                <table class="min-w-full divide-y divide-gray-600 rounded-lg overflow-hidden">
                    <thead class="bg-indigo-700/50">
                        <tr>
                            <th class="px-4 py-2 text-left text-sm font-medium text-gray-100 uppercase tracking-wider">Command</th>
                            <th class="px-4 py-2 text-left text-sm font-medium text-gray-100 uppercase tracking-wider">Description</th>
                        </tr>
                    </thead>
                    <tbody class="bg-gray-800 divide-y divide-gray-700">
                        <tr><td class="px-4 py-3 whitespace-nowrap text-sm font-medium text-indigo-400"><code>enc</code></td><td class="px-4 py-3 text-sm text-gray-300">The encryption/decryption function.</td></tr>
                        <tr><td class="px-4 py-3 whitespace-nowrap text-sm font-medium text-indigo-400"><code>-aes-256-cbc</code></td><td class="px-4 py-3 text-sm text-gray-300">Specifies the encryption algorithm (AES 256-bit with Cipher Block Chaining).</td></tr>
                        <tr><td class="px-4 py-3 whitespace-nowrap text-sm font-medium text-indigo-400"><code>-salt</code></td><td class="px-4 py-3 text-sm text-gray-300">Adds a random salt to prevent dictionary attacks (highly recommended).</td></tr>
                        <tr><td class="px-4 py-3 whitespace-nowrap text-sm font-medium text-indigo-400"><code>-in</code></td><td class="px-4 py-3 text-sm text-gray-300">The <strong>input file</strong> (your plain text password list).</td></tr>
                        <tr><td class="px-4 py-3 whitespace-nowrap text-sm font-medium text-indigo-400"><code>-out</code></td><td class="px-4 py-3 text-sm text-gray-300">The <strong>output file</strong> (your new encrypted file).</td></tr>
                    </tbody>
                </table>
            </div>

            <h4 class="text-lg font-medium text-gray-200 mb-2">1.1. Execute the Encryption Command</h4>
            <p class="text-gray-400 mb-2">Replace <code>[X]</code> with the number of passwords you generated (e.g., <code>3</code>).</p>
            <div class="bg-gray-900 p-4 rounded-lg overflow-x-auto text-sm font-mono text-green-400 mb-4">
                <code>openssl enc -aes-256-cbc -salt -in unicode_passwords_X.txt -out secure_passwords.enc</code>
            </div>

            <h4 class="text-lg font-medium text-gray-200 mb-2">1.2. Set Your Encryption Passphrase</h4>
            <p class="text-gray-400 mb-2">After running the command, OpenSSL will prompt you to enter and verify your master password for this file.</p>
            <p class="font-bold text-red-400 mt-2 p-2 bg-gray-900 rounded-lg">
                CRITICAL: The passphrase you enter here is the **only way** to decrypt the file. Store it securely.
            </p>

            <h4 class="text-lg font-medium text-gray-200 mb-2 mt-4">1.3. Delete the Original File</h4>
            <p class="text-gray-400 mb-2">Once the encrypted file (<code class="bg-gray-800 p-1 rounded">secure_passwords.enc</code>) is confirmed, securely delete the plain text original:</p>
            <div class="bg-gray-900 p-4 rounded-lg overflow-x-auto text-sm font-mono text-green-400 mb-4">
                <code>shred -zu unicode_passwords_X.txt</code>
            </div>
            
            <!-- Step 2 -->
            <h3 class="text-xl font-semibold text-gray-100 mb-3 border-t pt-4 border-gray-600">Step 2: Decrypt the File</h3>
            <p class="text-gray-400 mb-3">
                When you need to access your passwords, you must decrypt the <code class="bg-gray-800 p-1 rounded">.enc</code> file.
            </p>

            <!-- Table 2 -->
            <div class="overflow-x-auto mb-4">
                <table class="min-w-full divide-y divide-gray-600 rounded-lg overflow-hidden">
                    <thead class="bg-indigo-700/50">
                        <tr>
                            <th class="px-4 py-2 text-left text-sm font-medium text-gray-100 uppercase tracking-wider">Command</th>
                            <th class="px-4 py-2 text-left text-sm font-medium text-gray-100 uppercase tracking-wider">Description</th>
                        </tr>
                    </thead>
                    <tbody class="bg-gray-800 divide-y divide-gray-700">
                        <tr><td class="px-4 py-3 whitespace-nowrap text-sm font-medium text-indigo-400"><code>enc</code></td><td class="px-4 py-3 text-sm text-gray-300">The encryption/decryption function.</td></tr>
                        <tr><td class="px-4 py-3 whitespace-nowrap text-sm font-medium text-indigo-400"><code>-d</code></td><td class="px-4 py-3 text-sm text-gray-300">Specifies the <strong>decryption</strong> mode.</td></tr>
                        <tr><td class="px-4 py-3 whitespace-nowrap text-sm font-medium text-indigo-400"><code>-aes-256-cbc</code></td><td class="px-4 py-3 text-sm text-gray-300">Use the same algorithm as encryption.</td></tr>
                        <tr><td class="px-4 py-3 whitespace-nowrap text-sm font-medium text-indigo-400"><code>-in</code></td><td class="px-4 py-3 text-sm text-gray-300">The <strong>encrypted input file</strong>.</td></tr>
                        <tr><td class="px-4 py-3 whitespace-nowrap text-sm font-medium text-indigo-400"><code>-out</code></td><td class="px-4 py-3 text-sm text-gray-300">The <strong>output file</strong> where the decrypted content will be saved.</td></tr>
                    </tbody>
                </table>
            </div>

            <h4 class="text-lg font-medium text-gray-200 mb-2">2.1. Execute the Decryption Command</h4>
            <div class="bg-gray-900 p-4 rounded-lg overflow-x-auto text-sm font-mono text-green-400 mb-4">
                <code>openssl enc -d -aes-256-cbc -in secure_passwords.enc -out decrypted_passwords.txt</code>
            </div>

            <h4 class="text-lg font-medium text-gray-200 mb-2">2.2. Enter the Passphrase</h4>
            <p class="text-gray-400 mb-2">OpenSSL will prompt you for the master passphrase you set in Step 1.</p>
            <p class="text-gray-400 mb-2">Once successful, a new file named <code class="bg-gray-800 p-1 rounded">decrypted_passwords.txt</code> will appear.</p>
            <p class="text-gray-400 mb-2"><strong>Remember to delete this plain text file when you are finished using the information!</strong></p>
            <div class="bg-gray-900 p-4 rounded-lg overflow-x-auto text-sm font-mono text-green-400">
                <code>shred -zu decrypted_passwords.txt</code>
            </div>

        </section>
    </div>

    <script>
        const UNICODE_POOL = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~" +
            "ąćęłńóśźżĄĆĘŁŃÓŚŹŻäöüßÄÖÜ" +
            "абвгдеёжзийклмнопрстуфхцчшщъыьэюяАБВГДЕЁЖЗИЙКЛМНОПРСТФХЦЧШЩЪЫЬЭЮЯ" +
            "èéêëēėęùúûüūîïíīįìôöòóœøãåáàâæçñ" +
            "กขคฆงจฉชซฌญฎฏฐฑฒณดตถทธนบปผฝพฟภมยรฤลऌวศษสหฬอฮ" +
            "अआइईउऊऋएऐओऔकखगघचछजझटठडढणतथदधनपफबभमयरलवशषसह" +
            "あいうえおかきくけこさしすせそたちつてとなにぬねのアイウエオカキクケコサシスセソタチツテトナニヌネノ" +
            "漢字日本語中文测试字符∞±≠∑∏√∫∂∆πµΩ≈≡≤≥∇¢£¥€₩₪₹₽฿₫₴₦₲" +
            "★☆☀☁☂☃☄☠☢☣♠♣♥♦♪♫✔✖✳❄‼" +
            "©€¡¢£¤¥¦§¨ª«¬®¯°±²³´µ¶·¸¹º»¼½¾¿ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÐÑÒÓÔÕÖ×ØÙÚÛÜÝÞßàáâãäåæçèéêëìíîïðñòóôõö÷øùúûüýþÿŁłŃńŅņŇňŊŋŌōŎŏŐőŒœŔŕŖŗŘřŚśŜŝŞşŠšŢţŤťŦŧŨũŪūŬŭŮůŰůŴŵŶŷŸŹźŻżŽžſƆƎƜɐɑɒɔɘəɛɜɞɟɡɢɥɨɪɬɮɯɰɴɵɶɷɸɹʁʇʌʍʎʞΑΒΓΔΕΖΗΘΙΚΛΜΝΞΟΠΡΣΤΥΦΧΨΩαβγδελμνξοπρςστυφχψωАБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯабвгдежзийклмнопрстуфхцчшщъыьэюяᴀᴁᴂᴃᴄᴅᴆᴇᴈᴉᴊᴋᴌᴍᴎᴏᴐᴑᴒᴓᴔᴕᴖᴗᴘᴙᴚᴛᴜᴝᴞᴟᴠᴡᴢᴣᴤᴥᴦᴧᴨᴩᴪẞỲỳỴỵỸỹ‐‑‒–—―‖‗‘’‚‛“”„‟†‡•‣․‥…‧‰‱′″‴‵‶‷‸‹›※‽‾‿⁀⁁⁂⁃⁄⁅⁆⁇⁈⁉⁊⁋⁌⁍⁎⁏⁐⁑⁒⁓⁔⁕⁗⁰ⁱ⁴⁵⁶⁷⁸⁹⁺⁻⁼⁽⁾ⁿ₀₁₂₃₄₅₆₇₈₉₊₋₌₍₎₠₡₢₣₤₥₦₧₨₫₭₮₯₰₱₲₳₴₵₶₷₸₹℀℁ℂ℃℄℅℆ℇ℈℉ℊℋℌℍℎℏℐℑℒℓ℔ℕ№℗℘ℙℚℛℜℝ℞℟℠℡™℣ℤ℥℧ℨ℩KÅℬℭ℮ℯℰℱℲℳℴℵℶℷℸ⅁⅂⅃⅄ⅅⅆⅇⅈⅉ⅋ⅎ⅐⅑⅒⅓⅔⅕⅖⅗⅘⅙⅚⅛⅜⅝⅞⅟ⅠⅡⅢⅣⅤⅥⅦⅧⅨⅩⅪⅫⅬⅭⅮⅯⅰⅱⅲⅳⅴⅵⅶⅷⅸⅹⅺⅻⅼⅽⅾⅿↄ←↑→↓↔↕↖↗↘↙↚↛↜↝↞↟↠↡↢↣↤↥↦↧↨↩↪↫↬↭↮↯↰↱↲↳↴↵↶↷↸↹↺↻↼↽↾↿⇀⇁⇂⇃⇄⇅⇆⇇⇈⇉⇊⇋⇌⇍⇎⇏⇐⇑⇒⇓⇔⇕⇖⇗⇘⇙⇚⇛⇜⇝⇞⇟⇠⇡⇢⇣⇤⇥⇦⇧⇨⇩⇪⇫⇬⇭⇮⇯⇰⇱⇲⇳⇴⇵⇶⇷⇸⇹⇺⇻⇼⇽⇾⇿∀∁∂∃∄∅∆∇∈∉∊∋∌∍∎∏∐∑−∓∔∕∖∗∘∙√∛∜∝∞∟∠∡∢∣∤∥∦∧∨∩∪∫∬∭∮∯∰∱∲∳∴∵∶∷∸∹∺∻∼∽∾∿≀≁≂≃≄≅≆≇≈≉≊≋≌≍≎≏≐≑≒≓≔≕≖≗≘≙≚≛≜≝≞≟≠≡≢≣≤≥≦≧≨≩≪≫≬≭≮≯≰≱≲≳≴≵≶≷≸≹≺≻≼≽≾≿⊀⊁⊂⊃⊄⊅⊆⊇⊈⊉⊊⊋⊌⊍⊎⊏⊐⊑⊒⊓⊔⊕⊖⊗⊘⊙⊚⊛⊜⊝⊞⊟⊠⊡⊢⊣⊤⊥⊦⊧⊨⊩⊪⊫⊬⊭⊮⊯⊰⊱⊲⊳⊴⊵⊶⊷⊸⊹⊺⊻⊼⊽⊾⊿⋀⋁⋂⋃⋄⋅⋆⋇⋈⋉⋊⋋⋌⋍⋎⋏⋐⋑⋒⋓⋔⋕⋖⋗⋘⋙⋚⋛⋜⋝⋞⋟⋠⋡⋢⋣⋤⋥⋦⋧⋨⋩⋪⋫⋬⋭⋮⋯⋰⋱⌀⌁⌂⌃⌄⌅⌆⌇⌈⌉⌊⌋⌐⌑⌒⌓⌔⌕⌖⌗⌘⌙⌚⌛⌠⌡⌢⌣⌤⌥⌦⌧⌨⌫⌬⎛⎜⎝⎞⎟⎠⎡⎢⎣⎤⎥⎦⎧⎨⎩⎪⎫⎬⎭⏎⏏⏚⏛⏰⏱⏲⏳␢␣─━│┃┄┅┆┇┈┉┊┋┌┍┎┏┐┑┒┓└┕┖┗┘┙┚┛├┝┞┟┠┡┢┣┤┥┦┧┨┩┪┫┬┭┮┯┰┱┲┳┴┵┶┷┸┹┺┻┼┽┾┿╀╁╂╃╄╅╆╇╈╉╊╋╌╍╎╏═║╒╓╔╕╖╗╘╙╚╛╜╝╞╟╠╡╢╣╤╥╦╧╨╩╪╫╬╭╮╯╰╱╲╳╴╵╶╷╸╹╺╻╼╽╾╿▀ ▂▃▄▅▆▇█▉▊▋▌▍▎▏▐░▒▓▔▕▖▗▘▙▚▛▜▝▞▟■□▢▣▤▥▦▧▨▩▪▫▬▭▮▯▰▱▲△▴▵▶▷▸▹►▻▼▽▾▿◀◁◂◃◄◅◆◇◈◉◊○◌◍◎●◐◑◒◓◔◕◖◗◘◙◚◛◜◝◞◟◠◡◢◣◤◥◦◧◨◩◪◫◬◭◮◯◰◱◲◳◴◵◶◷◸◹◺◻◼◽◾◿☀☁☂☃☄★☆☇☈☉☊☋☌☍☎☏☐☑☒☓☔☕☖☗☘☙☚☛☜☝☞☟☠☡☢☣☤☥☦☧☩☪☫☬☭☮☯☰☱☲☳☴☵☶☷☸☹☺☻☼☽☾☿♀♁♂♃♄♅♆♇♈♉♊♋♌♍♎♏♐♑♒♓♔♕♖♗♘♙♚♛♜♝♞♟♠♡♢♣♤♥♦♧♨♩♪♫♬♭♮♯♲♳♴♵♶♷♸♹♺♻♼♽♾♿⚀⚁⚂⚃⚄⚅⚐⚑⚒⚓⚔⚕⚖⚗⚘⚙⚛⚜⚝⚞⚟⚠⚡⚢⚣⚤⚥⚦⚧⚨⚩⚪⚫⚬⚭⚮⚯⚰⚱⚲⚳⚴⚵⚶⚷⚸⚹⚺⚻⚼⛀⛁⛂⛃⛢⛤⛥⛦⛧⛨⛩⛪⛫⛬⛭⛮⛯⛰⛱⛲⛳⛴⛵⛶⛷⛸⛹⛺⛻⛼⛽⛾⛿✁✂✃✄✅✆✇✈✉✊✋✌✍✎✏✐✑✒✓✔✕✖✗✘✙✚✛✜✝✞✟✠✡✢✣✤✥✦✧✨✩✪✫✬✭✮✯✰✱✲✳✴✵✶✷✸✹✺✻✼✽✾✿❀❁❂❃❄❅❆❇❈❉❊❋❌❍❎❏❐❑❒❓❔❕❖❗❘❙❚❛❜❝❞❟❠❡❢❣❤❥❦❧➔➘➙➚➛➜➝➞➟➠➡➢➣➤➥➦➧➨➩➪➫➬➭➮➯➱➲➳➴➵➶➷➸➹➺➻➼➽➾⟰⟱⟲⟳⟴⟵⟶⟷⟸⟹⟺⟻⟼⟽⟾⟿⤀⤁⤂⤃⤄⤅⤆⤇⤈⤉⤊⤋⤌⤍⤎⤏⤐⤑⤒⤓⤔⤕⤖⤗⤘⤙⤚⤛⤜⤝⤞⤟⤠⤡⤢⤣⤤⤥⤦⤧⤨⤩⤪⤫⤬⤭⤮⤯⤰⤱⤲⤳⤴⤵⤶⤷⤸⤹⤺⤻⤼⤽⤾⤿⥀⥁⥂⥃⥄⥅⥆⥇⥈⥉⥊⥋⥌⥍⥎⥏⥐⥑⬀⬁⬂⬃⬄⬅⬆⬇⬈⬉⬊⬋⬌⬍⬎⬏⬐⬑⬒⬓⬔⬕⬖⬗⬘⬙⬚ⱠⱡⱣⱥⱦⱭⱯⱰ⸢⸣⸤⸥⸮〃 ﬀﬁﬂﬃﬄﬅﬆ﴾﴿﷼︐︑︒︓︔︕︖︗︘︙︰︱︲︳︴︵︶︷︸︹︺︻︼︽︾︿﹀﹁﹂﹃﹄﹅﹆﹉﹊﹋﹌﹍﹎﹏﹐﹑﹒﹔﹕﹖﹗﹘﹙﹚﹛﹜﹝﹞﹟﹠﹡﹢﹣﹤﹥﹦﹨﹩﹪﹫﻿！＂＃＄％＆＇（）＊＋，－．／０１２３４５６７８９：；＜＝＞？＠ＡＢＣＤＥＦＧＨＩＪＫＬＭＮＯＰＱＲＳＴＵＶＷＸＹＺ［＼］＾＿｀ａｂｃｄｅｆｇｈｉｊｋｌｍｎｏｐｑｒｓｔｕｖｗｘｙｚ｛｜｝～｟｠￠￡￢￣￤￥￦";

        const POOL_SIZE = 2802; // Updated to reflect the massive new pool
        const RENDER_THRESHOLD = 50; // Max number of passwords to render individually
        let lastGeneratedPasswords = []; // Stores the last generated array for download

        // Display the pool size on load
        document.getElementById('pool-size').textContent = `${POOL_SIZE} unique characters`;

        // --- Utility Functions ---

        /**
         * Calculates Shannon Entropy: H = L * log2(N)
         * @param {number} length - The length of the password.
         * @param {number} poolSize - The size of the character pool.
         * @returns {string} The entropy value, rounded to two decimal places.
         */
        function calculateEntropy(length, poolSize) {
            if (poolSize <= 1 || length <= 0) return 0.00;
            // Math.log2 is standard in modern JS environments
            const entropy = length * Math.log2(poolSize);
            return entropy.toFixed(2);
        }

        /**
         * Rates password strength based on entropy bits.
         * @param {string} entropy - The calculated entropy as a string.
         * @returns {{rating: string, color: string}} The strength rating and corresponding Tailwind color class.
         */
        function rateEntropy(entropy) {
            const e = parseFloat(entropy);
            if (e < 40) return { rating: "Very Weak", color: "text-red-500" };
            if (e < 60) return { rating: "Weak", color: "text-orange-500" };
            if (e < 80) return { rating: "Moderate", color: "text-yellow-500" };
            if (e < 100) return { rating: "Strong", color: "text-blue-500" };
            return { rating: "Very Strong", color: "text-green-500" };
        }

        /**
         * Generates a secure password using cryptographically random values.
         * @param {number} length - The desired password length.
         * @returns {string} The generated password.
         */
        function generatePassword(length) {
            if (length <= 0) return "";
            let password = '';
            const poolLength = UNICODE_POOL.length;

            // Generate enough random bytes (Uint32 is 4 bytes, allowing a large range)
            const randomBytes = new Uint32Array(length);
            // window.crypto is the browser's cryptographically secure random number generator
            window.crypto.getRandomValues(randomBytes);

            for (let i = 0; i < length; i++) {
                // Use modulus operation to map the random number to an index within the pool
                const randomIndex = randomBytes[i] % poolLength;
                password += UNICODE_POOL.charAt(randomIndex);
            }
            return password;
        }

        /**
         * Saves the globally stored passwords to a local .txt file.
         */
        function downloadPasswords() {
            if (lastGeneratedPasswords.length === 0) {
                console.error("No passwords to download. Generate passwords first.");
                return;
            }

            // Create a single string with each password on a new line
            const textContent = lastGeneratedPasswords.join('\n');
            const blob = new Blob([textContent], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);

            // Create a temporary anchor element for download
            const a = document.createElement('a');
            a.href = url;
            a.download = `unicode_passwords_${lastGeneratedPasswords.length}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);

            // Clean up the URL object
            URL.revokeObjectURL(url);
        }

        // Function to handle copying text (using execCommand for better iFrame compatibility)
        function copyToClipboard(text) {
            const tempTextArea = document.createElement('textarea');
            tempTextArea.value = text;
            document.body.appendChild(tempTextArea);
            tempTextArea.select();
            try {
                document.execCommand('copy');
                return true;
            } catch (err) {
                console.error('Copy failed:', err);
                return false;
            } finally {
                document.body.removeChild(tempTextArea);
            }
        }

        // --- Event Listeners ---

        document.getElementById('generate-button').addEventListener('click', () => {
            const lengthInput = document.getElementById('length');
            const countInput = document.getElementById('count');
            const outputDiv = document.getElementById('password-output');

            let length = parseInt(lengthInput.value);
            let count = parseInt(countInput.value);

            // Input Validation and correction
            if (isNaN(length) || length < 8) length = 8;
            if (isNaN(count) || count < 1) count = 1;
            if (count > 10000) count = 10000; // Enforce max

            lengthInput.value = length;
            countInput.value = count;

            // 1. Calculate and display Entropy
            const entropy = calculateEntropy(length, POOL_SIZE);
            const strength = rateEntropy(entropy);

            document.getElementById('entropy-bits').textContent = `${entropy} bits`;
            document.getElementById('strength-rating').textContent = strength.rating;
            document.getElementById('strength-rating').className = `${strength.color} text-2xl font-extrabold mt-1`;

            // 2. Generate Passwords
            const passwords = [];
            for (let i = 0; i < count; i++) {
                passwords.push(generatePassword(length));
            }
            lastGeneratedPasswords = passwords; // Store for download

            // 3. Display Passwords/Summary
            outputDiv.innerHTML = ''; // Clear previous output

            if (count > RENDER_THRESHOLD) {
                // Display summary for large batches (no individual rendering for performance)
                outputDiv.innerHTML = `
                    <div class="p-6 bg-yellow-900/50 border border-yellow-500 rounded-xl text-yellow-300 shadow-inner">
                        <p class="font-bold text-xl mb-2 flex items-center">
                            <svg class="w-6 h-6 mr-2" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
                            Generation Complete
                        </p>
                        <p>Successfully generated <span class="font-bold">${count}</span> passwords of length <span class="font-bold">${length}</span>.</p>
                        <p class="mt-3 text-sm">Individual passwords are not displayed here due to performance limits. Please use the <strong>Download Button</strong> below to save the complete list securely.</p>
                    </div>
                `;

            } else {
                // Render individual passwords for small batches
                passwords.forEach((pwd, index) => {
                    const passwordItem = document.createElement('div');
                    passwordItem.className = 'password-container relative flex items-center justify-between p-4 bg-gray-600 rounded-lg transition duration-200 shadow-md border border-gray-500 hover:bg-gray-500';
                    passwordItem.innerHTML = `
                        <span class="text-sm font-semibold text-indigo-400 mr-4">#${index + 1}:</span>
                        <code class="flex-grow text-lg break-all font-mono text-gray-100">${pwd}</code>
                        <button class="copy-button ml-4 p-2 rounded-full bg-indigo-700 hover:bg-indigo-600 transition duration-300 shadow-lg"
                                 data-password="${pwd}" title="Copy to Clipboard">
                            <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v7M8 5H6M4 12H3m14 0h1m-5 0v3m0 0v-3"></path></svg>
                        </button>
                    `;
                    outputDiv.appendChild(passwordItem);
                });

                // Add event listeners to copy buttons
                document.querySelectorAll('.copy-button').forEach(button => {
                    button.addEventListener('click', (e) => {
                        const textToCopy = e.currentTarget.getAttribute('data-password');
                        if (copyToClipboard(textToCopy)) {
                            const originalContent = e.currentTarget.innerHTML;
                            e.currentTarget.innerHTML = '<svg class="w-5 h-5 text-green-300" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg>'; // Checkmark

                            setTimeout(() => {
                                e.currentTarget.innerHTML = originalContent;
                            }, 1500);
                        }
                    });
                });
            }
        });

        document.getElementById('download-button').addEventListener('click', downloadPasswords);

        // Trigger generation on load to populate initial entropy/size
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('generate-button').click();
        });
    </script>
</body>
</html>
